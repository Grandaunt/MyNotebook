## 浅谈linux-IPC
---

linux的IPC实现方式主要有以下几种：
* pipe和named-pipe
* 信号量semaphore
* 消息队列
* 信号signal
* 共享内存
* socket

### pipe和named-pipe

管道是一种文件，属于一种特殊的文件系统:pipefs。管道的本质是内核维护了一个缓冲区，与管道文件相关联，对管道文件的操作被内核转换为对这块缓冲区内存的操作。管道具有如下特点：
* 半双工。只能一个进程读，一个进程写。通过`int pipe(int fd[2])`创建，成功返回0，失败返回-1。之后可以通过读取端描述符fd[0]从管道读数据，写入端描述符fd[1]从管道写数据。要实现全双工需要定义两个管道。
* 通信的进程必须具有亲缘关系。这是因为他们共同的祖先进程调用pipe后，得到的两个文件描述符都会被fork一份到所有的子进程中，通过关闭子进程中不需通信的进程的特定文件描述符使得需要通信的进程可以通过管道通信。
* 只有当所有写入端描述符都已关闭，且管道中的数据都已读出时，对读取端描述符调用`read`才会返回0，即读到EOF标志。
* 若所有读取端描述符都已经关闭，此时写入则会报错。
* 只有所有读写的描述符都被关闭，管道才能被销毁。请及时关闭所有未使用的管道描述符。

命名管道（FIFO）与管道类似，最大的差别就是有文件与之关联，正因此，可以用于非亲缘关系的进程间通信（即不再需要靠世代相传的文件描述符了）。

// todo 待续